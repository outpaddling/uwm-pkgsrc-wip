# $NetBSD$

###########################################################
#               Generated by fbsd2pkg                     #
###########################################################

PKGNAME=	seqprep-${PORTVERSION}
DISTNAME=	v${PORTVERSION}
CATEGORIES=	biology
MASTER_SITES=	https://github.com/jstjohn/SeqPrep/archive/

MAINTAINER=	bacon@NetBSD.org

COMMENT=	Strip adaptors and/or merge paired reads with overlap into single reads
#LICENSE=	

# Pessimistic assumption.  Test and change if possible.
MAKE_JOBS_SAFE=	no

# Just assuming C and C++: Adjust this!
USE_LANGUAGES=	c c++

WRKSRC=		${WRKDIR}/SeqPrep-${PORTVERSION}

# Adapt REINPLACE commands to SUBST:
SUBST_CLASSES+=		makevars
SUBST_STAGE.makevars=	post-patch
SUBST_FILES.makevars=	${WRKSRC}/Makefile
SUBST_SED.makevars=	-e 's|CC=|CC?=|' \
			-e 's|CFLAGS=|CFLAGS?=|' \
			-e 's|$${CFLAGS}|-c $${CFLAGS}|' \
			-e 's|$$(CFLAGS)|-c $$(CFLAGS)|'

SUBST_CLASSES+=		testscript
SUBST_STAGE.testscript=	post-patch
SUBST_FILES.testscript=	${WRKSRC}/Test/RUNTEST.sh
SUBST_SED.testscript=	-e 's|../SeqPrep|SeqPrep|g' \
			-e 's|/bin/bash|/bin/sh|g'

PORTVERSION=	1.1

# You may need this, especially if using do-install.
# AUTO_MKDIRS=	yes

post-patch:
	${MKDIR} ${WRKSRC}/Test/out ${WRKSRC}/Test/info

do-install:
	${MKDIR} ${DESTDIR}${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/SeqPrep ${DESTDIR}${PREFIX}/bin

.include "../../devel/zlib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
