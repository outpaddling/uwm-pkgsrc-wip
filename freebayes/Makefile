# $NetBSD$
#
###########################################################
#               Generated by fbsd2pkg                     #
###########################################################

###########################################################
# Unconverted and partially converted FreeBSD port syntax:

# # FIXME: Do we need a version >= the submodules bamtools and vcflib?
# BUILD_DEPENDS=	${LOCALBASE}/include/intervaltree/IntervalTree.h:/usr/wip/math/intervaltree \
# 		${LOCALBASE}/include/multichoose/multichoose.h:/usr/wip/math/multichoose
# LIB_DEPENDS=	libbamtools.so:/usr/wip/biology/bamtools \
# 		libvcflib.so.1:/usr/wip/biology/vcflib \
# 		libtabix.so.1:/usr/wip/biology/tabixpp \
# 		libsw.so.1:/usr/wip/biology/smithwaterman \
# 		libhts.so:/usr/ports/biology/htslib
# Unknown tool: USE_TOOLS=	compiler:c++11-lang
# 		-I${LOCALBASE}/include/intervaltree \
# 		-I${LOCALBASE}/include/vcflib \
# 		-I${LOCALBASE}/include/multichoose \
# 		-I${LOCALBASE}/include/smithwaterman

DISTNAME=	freebayes-${PORTVERSION}
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_GITHUB:=outpaddling/}
GITHUB_TAG=	${PORTVERSION}

MAINTAINER=	dsiercks@uwm.edu
HOMEPAGE=	https://github.com/ekg/freebayes
COMMENT=	Bayesian haplotype-based polymorphism discovery and genotyping
LICENSE=	mit

# Just assuming C and C++: Adjust this!
USE_LANGUAGES=	c c++
USE_LIBTOOL=	yes
USE_TOOLS+=	gmake

MAKE_FILE=	Makefile.external-libs
INSTALL_TARGET=	install-strip

# SUBST_CLASSES+=           compile
# SUBST_FILES.compile=      ${WRKSRC}/src/Makefile.external-libs
# SUBST_STAGE.compile=      post-patch
# SUBST_SED.compile+=       -e "s|-lm|-lm -rpath=${PREFIX}/lib|g"

PORTVERSION=	65c4880d09ec21f7f2755eac9476b607011522f3

.include "../../mk/bsd.prefs.mk"

.if ${OPSYS} == Linux
MAKE_FLAGS=	EXTRALIBS=${COMPILER_RPATH_FLAG}${PREFIX}/lib
.else
MAKE_FLAGS+=	EXTRALIBS=${COMPILER_RPATH_FLAG}${PREFIX}/lib
.endif

.include "../../devel/libexecinfo/buildlink3.mk"
.include "../../wip/filevercmp/buildlink3.mk"
.include "../../devel/zlib/buildlink3.mk"
.include "../../jb-wip/intervaltree/buildlink3.mk"
.include "../../jb-wip/multichoose/buildlink3.mk"
.include "../../wip/bamtools/buildlink3.mk"
.include "../../jb-wip/vcflib/buildlink3.mk"
.include "../../jb-wip/tabixpp/buildlink3.mk"
.include "../../jb-wip/smithwaterman/buildlink3.mk"
.include "../../wip/htslib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
