# $NetBSD$

###########################################################
#               Generated by fbsd2pkg                     #
###########################################################

###########################################################
# Unconverted and partially converted FreeBSD port syntax:

DISTNAME=	plinkseq-0.10
DISTFILES=	plinkseq-src-0.10.tgz
CATEGORIES=	biology
MASTER_SITES=	http://psychgen.u.hpc.mssm.edu/plinkseq_downloads/

MAINTAINER=	bacon4000@gmail.com

COMMENT=	Toolset for working with human genetic variation data
LICENSE=	gnu-gpl-v2

# Pessimistic assumption.  Test and change if possible.
MAKE_JOBS_SAFE=	no

ONLY_FOR_PLATFORM=	

# Just assuming C and C++: Adjust this!
USE_LANGUAGES=	c c++
USE_TOOLS+=	gmake

SUBST_CLASSES+=		inet
SUBST_STAGE.inet=	post-patch
SUBST_FILES.inet=	${WRKSRC}/sources/mongoose/sources/lib/mongoose.c
SUBST_SED.inet=		-e 's|PF_INET|AF_INET|g'

SUBST_CLASSES+=		defs
SUBST_STAGE.defs=	post-patch
SUBST_FILES.defs=	${WRKSRC}/config_defs.Makefile
SUBST_SED.defs=		-e 's|g++|${CXX}|g' \
			-e 's|gcc|${CC}|g' \
			-e 's|CXXFLAGS = -O3|CXXFLAGS = ${CXXFLAGS}|g' \
			-e 's|ALL_CFLAGS =-O3|ALL_CFLAGS = ${CFLAGS}|g'

SUBST_CLASSES+=		makefile
SUBST_STAGE.makefile=	post-patch
SUBST_FILES.makefile=	${WRKSRC}/Makefile
SUBST_SED.makefile=	-e 's| -ldl||g' \
			-e 's| $$(STATIC_FLAG)||g'

DATADIR=	${PREFIX}/share/plinkseq
DOCSDIR=	${PREFIX}/share/doc/plinkseq

# Sets OPSYS, OS_VERSION, MACHINE_ARCH, etc..
#.include "../../mk/bsd.prefs.mk"

# Keep this if there are user-selectable options.
#.include "options.mk"

# You may need this, especially if using do-install.
#AUTO_MKDIRS=	yes

do-install:
.for f in behead browser gcol mm mongoose pdas pseq smp tab2vcf
	${INSTALL_PROGRAM} ${WRKSRC}/build/execs/${f} ${DESTDIR}${PREFIX}/bin
.endfor
	${INSTALL_DATA} ${WRKSRC}/sources/plinkseq/build/lib/libplinkseq.a \
		${DESTDIR}${PREFIX}/lib

.include "../../mk/bsd.pkg.mk"
