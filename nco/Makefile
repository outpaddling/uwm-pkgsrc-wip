# $NetBSD$

###########################################################
#               Generated by fbsd2pkg                     #
###########################################################

DISTNAME=	nco-${PORTVERSION}
CATEGORIES=	science
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=nco/}

MAINTAINER=	dsiercks@uwm.edu

COMMENT=	Manipulates and analyzes netCDF data
LICENSE=	gnu-gpl-v3

MAKE_JOBS_SAFE=	no

# Just assuming C and C++: Adjust this!
USE_LANGUAGES=	c c++
USE_TOOLS+=	gmake makeinfo nm
USE_LIBTOOL=	yes
GNU_CONFIGURE=	yes

# bmake configure && find . -name Makefile
SUBST_CLASSES+=		psource		
SUBST_STAGE.psource=	post-configure
SUBST_FILES.psource=	${WRKSRC}/data/Makefile \
			${WRKSRC}/doc/Makefile \
			${WRKSRC}/Makefile \
			${WRKSRC}/man/Makefile \
			${WRKSRC}/bld/Makefile \
			${WRKSRC}/src/nco/Makefile \
			${WRKSRC}/src/nco_c++/Makefile \
			${WRKSRC}/src/nco++/Makefile \
			${WRKSRC}/src/Makefile
SUBST_SED.psource=	-e 's|-D_POSIX_SOURCE||g'	

# FIXME: Not sure setting PATH has any effect.  Pkgsrc might override it.
CONFIGURE_ENV=	ANTLR_ROOT=${PREFIX} \
		NETCDF_INC=${PREFIX}/include \
		NETCDF_LIB=${PREFIX}/lib \
		PATH=${LOCALBASE}/bin:$$PATH

MAKE_ENV+=	PATH=${LOCALBASE}/bin:$$PATH

PORTVERSION=	4.4.8

.include "../../mk/bsd.prefs.mk"

DEPENDS+=	bison:../../devel/bison \
#		texinfo>=5.1:../../devel/gtexinfo
.include "../../devel/flex/buildlink3.mk"
.include "../../wip/antlr/buildlink3.mk"
.if ${OPSYS} != "Linux"
.include "../../devel/binutils/buildlink3.mk"
.endif
.include "../../math/gsl/buildlink3.mk"
.include "../../devel/hdf5/buildlink3.mk"
.include "../../devel/netcdf/buildlink3.mk"
.include "../../wip/udunits2/buildlink3.mk"
.include "../../textproc/expat/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
